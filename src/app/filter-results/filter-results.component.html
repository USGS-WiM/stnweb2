<!-- Results-->
<mat-expansion-panel [(expanded)]="resultsPanelOpen" style="margin: 0px 15px 0px">
    <mat-expansion-panel-header>
        <mat-panel-title> Results </mat-panel-title>
    </mat-expansion-panel-header>
    <div *ngIf="dataSource">
        <div class="results-table-div">
            <table
                mat-table
                id="resultsTable"
                [dataSource]="dataSource"
                (matSortChange)="sortData($event)"
                class="mat-elevation-z8"
                matSort
            >
                <!-- site id column -->
                <ng-container matColumnDef="siteId">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="site_id">
                        Site ID
                    </th>
                    <td mat-cell *matCellDef="let element">
                        <a class="site-link" role="button" tabindex="0" (click)="routeToSite(element.site_id)">{{ element.site_id }}</a>
                    </td>
                </ng-container>

                <!-- site name column -->
                <ng-container matColumnDef="siteName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="site_name">
                        Name
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.site_name }}
                    </td>
                </ng-container>

                <!-- site description column -->
                <ng-container matColumnDef="siteDesc">
                    <th mat-header-cell *matHeaderCellDef>
                        Site Description
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.site_description }}
                    </td>
                </ng-container>

                <!-- site state column -->
                <ng-container matColumnDef="state">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="state">
                        State
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.state }}
                    </td>
                </ng-container>

                <!-- site city column -->
                <ng-container matColumnDef="city">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="city">
                        City
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.city }}
                    </td>
                </ng-container>

                <!-- latitude column -->
                <ng-container matColumnDef="latitude">
                    <th mat-header-cell *matHeaderCellDef> Latitude </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.latitude_dd }}
                    </td>
                </ng-container>

                <!-- longitude Column -->
                <ng-container matColumnDef="longitude">
                    <th mat-header-cell *matHeaderCellDef> Longitude </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.longitude_dd }}
                    </td>
                </ng-container>

                <!-- waterbody Column -->
                <ng-container matColumnDef="waterbody">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header="waterbody">
                        Waterbody
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.waterbody }}
                    </td>
                </ng-container>

                <!-- permanent housing Column -->
                <ng-container matColumnDef="permHouse">
                    <th mat-header-cell
                        *matHeaderCellDef
                        mat-sort-header="is_permanent_housing_installed"
                    >
                        Permanent Housing?
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.is_permanent_housing_installed }}
                    </td>
                </ng-container>

                <!-- Button Column -->
                <ng-container matColumnDef="button">
                    <th mat-header-cell *matHeaderCellDef>
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <button mat-stroked-button class="view-details-btn" (click)="openDetailsDialog(row)"
                            aria-label="View Sensors"><mat-icon>search</mat-icon> View Sensors
                        </button>
                    </td>
                </ng-container>    

                <tr mat-header-row
                    *matHeaderRowDef="displayedColumns"
                ></tr>
                <tr mat-row
                    *matRowDef="let row; columns: displayedColumns"
                    class="results-row"
                    [class.row-is-clicked]="clickedRows.has(row)"
                ></tr>
            </table>
        </div>

        <mat-paginator [pageSizeOptions]="[5, 10, 25]" class="results-paginator"></mat-paginator>
    </div>
</mat-expansion-panel>
